# for more information on using Solr with Docker, see:
# https://solr.apache.org/guide/solr/latest/deployment-guide/solr-in-docker.html#getting-started-with-the-docker-image

services:
  zoo:
    image: zookeeper:3.9
    networks:
      - search
    environment:
      ZOO_4LW_COMMANDS_WHITELIST: "mntr,conf,ruok"

  solr-local:
    image: solr:9-slim
    volumes:
      - solrdata:/var/solr
    ports:
      - "8983:8983"
    networks:
      - search
    environment:
      ZK_HOST: "zoo:2181"
    depends_on:
      - zoo
    command:
      - solr-precreate

networks:
  search:
    driver: bridge

volumes:
  solrdata:
